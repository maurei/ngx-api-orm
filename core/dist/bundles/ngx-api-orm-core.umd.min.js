!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ngx-api-orm/core",["exports","@angular/core","rxjs","rxjs/operators","@angular/common"],factory):factory(global["ngx-api-orm-core"]={},global.ng.core,global.rxjs,global.rxjs.operators,global.ng.common)}(this,function(exports,core,rxjs,operators,common){"use strict";var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)(d=decorators[i])&&(r=(c<3?d(r):3<c?d(target,key,r):d(target,key))||r);return 3<c&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||0<n--)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}
/**
     * @license Angular v6.1.8
     * (c) 2010-2018 Google, Inc. https://angular.io/
     * License: MIT
     */
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var HttpHandler=function(){},HttpBackend=function(){},HttpHeaders=function(){function HttpHeaders(headers){var _this=this;this.normalizedNames=new Map,this.lazyUpdate=null,headers?this.lazyInit="string"==typeof headers?function(){_this.headers=new Map,headers.split("\n").forEach(function(line){var index=line.indexOf(":");if(0<index){var name_1=line.slice(0,index),key=name_1.toLowerCase(),value=line.slice(index+1).trim();_this.maybeSetNormalizedName(name_1,key),_this.headers.has(key)?_this.headers.get(key).push(value):_this.headers.set(key,[value])}})}:function(){_this.headers=new Map,Object.keys(headers).forEach(function(name){var values=headers[name],key=name.toLowerCase();"string"==typeof values&&(values=[values]),0<values.length&&(_this.headers.set(key,values),_this.maybeSetNormalizedName(name,key))})}:this.headers=new Map}return HttpHeaders.prototype.has=function(name){return this.init(),this.headers.has(name.toLowerCase())},HttpHeaders.prototype.get=function(name){this.init();var values=this.headers.get(name.toLowerCase());return values&&0<values.length?values[0]:null},HttpHeaders.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},HttpHeaders.prototype.getAll=function(name){return this.init(),this.headers.get(name.toLowerCase())||null},HttpHeaders.prototype.append=function(name,value){return this.clone({name:name,value:value,op:"a"})},HttpHeaders.prototype.set=function(name,value){return this.clone({name:name,value:value,op:"s"})},HttpHeaders.prototype.delete=function(name,value){return this.clone({name:name,value:value,op:"d"})},HttpHeaders.prototype.maybeSetNormalizedName=function(name,lcName){this.normalizedNames.has(lcName)||this.normalizedNames.set(lcName,name)},HttpHeaders.prototype.init=function(){var _this=this;this.lazyInit&&(this.lazyInit instanceof HttpHeaders?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(update){return _this.applyUpdate(update)}),this.lazyUpdate=null))},HttpHeaders.prototype.copyFrom=function(other){var _this=this;other.init(),Array.from(other.headers.keys()).forEach(function(key){_this.headers.set(key,other.headers.get(key)),_this.normalizedNames.set(key,other.normalizedNames.get(key))})},HttpHeaders.prototype.clone=function(update){var clone=new HttpHeaders;return clone.lazyInit=this.lazyInit&&this.lazyInit instanceof HttpHeaders?this.lazyInit:this,clone.lazyUpdate=(this.lazyUpdate||[]).concat([update]),clone},HttpHeaders.prototype.applyUpdate=function(update){var key=update.name.toLowerCase();switch(update.op){case"a":case"s":var value=update.value;if("string"==typeof value&&(value=[value]),0===value.length)return;this.maybeSetNormalizedName(update.name,key);var base=("a"===update.op?this.headers.get(key):void 0)||[];base.push.apply(base,function(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}(value)),this.headers.set(key,base);break;case"d":var toDelete_1=update.value;if(toDelete_1){var existing=this.headers.get(key);if(!existing)return;0===(existing=existing.filter(function(value){return-1===toDelete_1.indexOf(value)})).length?(this.headers.delete(key),this.normalizedNames.delete(key)):this.headers.set(key,existing)}else this.headers.delete(key),this.normalizedNames.delete(key)}},HttpHeaders.prototype.forEach=function(fn){var _this=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(key){return fn(_this.normalizedNames.get(key),_this.headers.get(key))})},HttpHeaders}(),HttpUrlEncodingCodec=function(){function HttpUrlEncodingCodec(){}return HttpUrlEncodingCodec.prototype.encodeKey=function(key){return standardEncoding(key)},HttpUrlEncodingCodec.prototype.encodeValue=function(value){return standardEncoding(value)},HttpUrlEncodingCodec.prototype.decodeKey=function(key){return decodeURIComponent(key)},HttpUrlEncodingCodec.prototype.decodeValue=function(value){return decodeURIComponent(value)},HttpUrlEncodingCodec}();function standardEncoding(v){return encodeURIComponent(v).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var HttpParams=function(){function HttpParams(options){void 0===options&&(options={});var rawParams,codec,map$$1,_this=this;if(this.updates=null,this.cloneFrom=null,this.encoder=options.encoder||new HttpUrlEncodingCodec,options.fromString){if(options.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(rawParams=options.fromString,codec=this.encoder,map$$1=new Map,0<rawParams.length&&rawParams.split("&").forEach(function(param){var eqIdx=param.indexOf("="),_a=__read(-1==eqIdx?[codec.decodeKey(param),""]:[codec.decodeKey(param.slice(0,eqIdx)),codec.decodeValue(param.slice(eqIdx+1))],2),key=_a[0],val=_a[1],list=map$$1.get(key)||[];list.push(val),map$$1.set(key,list)}),map$$1)}else options.fromObject?(this.map=new Map,Object.keys(options.fromObject).forEach(function(key){var value=options.fromObject[key];_this.map.set(key,Array.isArray(value)?value:[value])})):this.map=null}return HttpParams.prototype.has=function(param){return this.init(),this.map.has(param)},HttpParams.prototype.get=function(param){this.init();var res=this.map.get(param);return res?res[0]:null},HttpParams.prototype.getAll=function(param){return this.init(),this.map.get(param)||null},HttpParams.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},HttpParams.prototype.append=function(param,value){return this.clone({param:param,value:value,op:"a"})},HttpParams.prototype.set=function(param,value){return this.clone({param:param,value:value,op:"s"})},HttpParams.prototype.delete=function(param,value){return this.clone({param:param,value:value,op:"d"})},HttpParams.prototype.toString=function(){var _this=this;return this.init(),this.keys().map(function(key){var eKey=_this.encoder.encodeKey(key);return _this.map.get(key).map(function(value){return eKey+"="+_this.encoder.encodeValue(value)}).join("&")}).join("&")},HttpParams.prototype.clone=function(update){var clone=new HttpParams({encoder:this.encoder});return clone.cloneFrom=this.cloneFrom||this,clone.updates=(this.updates||[]).concat([update]),clone},HttpParams.prototype.init=function(){var _this=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(key){return _this.map.set(key,_this.cloneFrom.map.get(key))}),this.updates.forEach(function(update){switch(update.op){case"a":case"s":var base=("a"===update.op?_this.map.get(update.param):void 0)||[];base.push(update.value),_this.map.set(update.param,base);break;case"d":if(void 0===update.value){_this.map.delete(update.param);break}var base_1=_this.map.get(update.param)||[],idx=base_1.indexOf(update.value);-1!==idx&&base_1.splice(idx,1),0<base_1.length?_this.map.set(update.param,base_1):_this.map.delete(update.param)}}),this.cloneFrom=null)},HttpParams}();
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function isArrayBuffer(value){return"undefined"!=typeof ArrayBuffer&&value instanceof ArrayBuffer}function isBlob(value){return"undefined"!=typeof Blob&&value instanceof Blob}function isFormData(value){return"undefined"!=typeof FormData&&value instanceof FormData}var HttpEventType,HttpRequest=function(){function HttpRequest(method,url,third,fourth){var options;if(this.url=url,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=method.toUpperCase(),function(method){switch(method){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||fourth?(this.body=void 0!==third?third:null,options=fourth):options=third,options&&(this.reportProgress=!!options.reportProgress,this.withCredentials=!!options.withCredentials,options.responseType&&(this.responseType=options.responseType),options.headers&&(this.headers=options.headers),options.params&&(this.params=options.params)),this.headers||(this.headers=new HttpHeaders),this.params){var params=this.params.toString();if(0===params.length)this.urlWithParams=url;else{var qIdx=url.indexOf("?"),sep=-1===qIdx?"?":qIdx<url.length-1?"&":"";this.urlWithParams=url+sep+params}}else this.params=new HttpParams,this.urlWithParams=url}return HttpRequest.prototype.serializeBody=function(){return null===this.body?null:isArrayBuffer(this.body)||isBlob(this.body)||isFormData(this.body)||"string"==typeof this.body?this.body:this.body instanceof HttpParams?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},HttpRequest.prototype.detectContentTypeHeader=function(){return null===this.body?null:isFormData(this.body)?null:isBlob(this.body)?this.body.type||null:isArrayBuffer(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof HttpParams?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},HttpRequest.prototype.clone=function(update){void 0===update&&(update={});var method=update.method||this.method,url=update.url||this.url,responseType=update.responseType||this.responseType,body=void 0!==update.body?update.body:this.body,withCredentials=void 0!==update.withCredentials?update.withCredentials:this.withCredentials,reportProgress=void 0!==update.reportProgress?update.reportProgress:this.reportProgress,headers=update.headers||this.headers,params=update.params||this.params;return void 0!==update.setHeaders&&(headers=Object.keys(update.setHeaders).reduce(function(headers,name){return headers.set(name,update.setHeaders[name])},headers)),update.setParams&&(params=Object.keys(update.setParams).reduce(function(params,param){return params.set(param,update.setParams[param])},params)),new HttpRequest(method,url,body,{params:params,headers:headers,reportProgress:reportProgress,responseType:responseType,withCredentials:withCredentials})},HttpRequest}();
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */!function(HttpEventType){HttpEventType[HttpEventType.Sent=0]="Sent",HttpEventType[HttpEventType.UploadProgress=1]="UploadProgress",HttpEventType[HttpEventType.ResponseHeader=2]="ResponseHeader",HttpEventType[HttpEventType.DownloadProgress=3]="DownloadProgress",HttpEventType[HttpEventType.Response=4]="Response",HttpEventType[HttpEventType.User=5]="User"}(HttpEventType||(HttpEventType={}));var HttpResponseBase=function(init,defaultStatus,defaultStatusText){void 0===defaultStatus&&(defaultStatus=200),void 0===defaultStatusText&&(defaultStatusText="OK"),this.headers=init.headers||new HttpHeaders,this.status=void 0!==init.status?init.status:defaultStatus,this.statusText=init.statusText||defaultStatusText,this.url=init.url||null,this.ok=200<=this.status&&this.status<300},HttpHeaderResponse=function(_super){function HttpHeaderResponse(init){void 0===init&&(init={});var _this=_super.call(this,init)||this;return _this.type=HttpEventType.ResponseHeader,_this}return __extends(HttpHeaderResponse,_super),HttpHeaderResponse.prototype.clone=function(update){return void 0===update&&(update={}),new HttpHeaderResponse({headers:update.headers||this.headers,status:void 0!==update.status?update.status:this.status,statusText:update.statusText||this.statusText,url:update.url||this.url||void 0})},HttpHeaderResponse}(HttpResponseBase),HttpResponse=function(_super){function HttpResponse(init){void 0===init&&(init={});var _this=_super.call(this,init)||this;return _this.type=HttpEventType.Response,_this.body=void 0!==init.body?init.body:null,_this}return __extends(HttpResponse,_super),HttpResponse.prototype.clone=function(update){return void 0===update&&(update={}),new HttpResponse({body:void 0!==update.body?update.body:this.body,headers:update.headers||this.headers,status:void 0!==update.status?update.status:this.status,statusText:update.statusText||this.statusText,url:update.url||this.url||void 0})},HttpResponse}(HttpResponseBase),HttpErrorResponse=function(_super){function HttpErrorResponse(init){var _this=_super.call(this,init,0,"Unknown Error")||this;return _this.name="HttpErrorResponse",_this.ok=!1,200<=_this.status&&_this.status<300?_this.message="Http failure during parsing for "+(init.url||"(unknown url)"):_this.message="Http failure response for "+(init.url||"(unknown url)")+": "+init.status+" "+init.statusText,_this.error=init.error||null,_this}return __extends(HttpErrorResponse,_super),HttpErrorResponse}(HttpResponseBase);
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function addBody(options,body){return{body:body,headers:options.headers,observe:options.observe,params:options.params,reportProgress:options.reportProgress,responseType:options.responseType,withCredentials:options.withCredentials}}var HttpClient=function(){function HttpClient(handler){this.handler=handler}return HttpClient.prototype.request=function(first,url,options){var req,_this=this;if(void 0===options&&(options={}),first instanceof HttpRequest)req=first;else{var headers=void 0;headers=options.headers instanceof HttpHeaders?options.headers:new HttpHeaders(options.headers);var params=void 0;options.params&&(params=options.params instanceof HttpParams?options.params:new HttpParams({fromObject:options.params})),req=new HttpRequest(first,url,void 0!==options.body?options.body:null,{headers:headers,params:params,reportProgress:options.reportProgress,responseType:options.responseType||"json",withCredentials:options.withCredentials})}var events$=rxjs.of(req).pipe(operators.concatMap(function(req){return _this.handler.handle(req)}));if(first instanceof HttpRequest||"events"===options.observe)return events$;var res$=events$.pipe(operators.filter(function(event){return event instanceof HttpResponse}));switch(options.observe||"body"){case"body":switch(req.responseType){case"arraybuffer":return res$.pipe(operators.map(function(res){if(null!==res.body&&!(res.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return res.body}));case"blob":return res$.pipe(operators.map(function(res){if(null!==res.body&&!(res.body instanceof Blob))throw new Error("Response is not a Blob.");return res.body}));case"text":return res$.pipe(operators.map(function(res){if(null!==res.body&&"string"!=typeof res.body)throw new Error("Response is not a string.");return res.body}));case"json":default:return res$.pipe(operators.map(function(res){return res.body}))}case"response":return res$;default:throw new Error("Unreachable: unhandled observe type "+options.observe+"}")}},HttpClient.prototype.delete=function(url,options){return void 0===options&&(options={}),this.request("DELETE",url,options)},HttpClient.prototype.get=function(url,options){return void 0===options&&(options={}),this.request("GET",url,options)},HttpClient.prototype.head=function(url,options){return void 0===options&&(options={}),this.request("HEAD",url,options)},HttpClient.prototype.jsonp=function(url,callbackParam){return this.request("JSONP",url,{params:(new HttpParams).append(callbackParam,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},HttpClient.prototype.options=function(url,options){return void 0===options&&(options={}),this.request("OPTIONS",url,options)},HttpClient.prototype.patch=function(url,body,options){return void 0===options&&(options={}),this.request("PATCH",url,addBody(options,body))},HttpClient.prototype.post=function(url,body,options){return void 0===options&&(options={}),this.request("POST",url,addBody(options,body))},HttpClient.prototype.put=function(url,body,options){return void 0===options&&(options={}),this.request("PUT",url,addBody(options,body))},HttpClient=__decorate([core.Injectable(),__metadata("design:paramtypes",[HttpHandler])],HttpClient)}(),HttpInterceptorHandler=function(){function HttpInterceptorHandler(next,interceptor){this.next=next,this.interceptor=interceptor}return HttpInterceptorHandler.prototype.handle=function(req){return this.interceptor.intercept(req,this.next)},HttpInterceptorHandler}(),HTTP_INTERCEPTORS=new core.InjectionToken("HTTP_INTERCEPTORS"),NoopInterceptor=function(){function NoopInterceptor(){}return NoopInterceptor.prototype.intercept=function(req,next){return next.handle(req)},NoopInterceptor=__decorate([core.Injectable()],NoopInterceptor)}(),nextRequestId=0,JsonpCallbackContext=function(){},JsonpClientBackend=function(){function JsonpClientBackend(callbackMap,document){this.callbackMap=callbackMap,this.document=document}return JsonpClientBackend.prototype.nextCallback=function(){return"ng_jsonp_callback_"+nextRequestId++},JsonpClientBackend.prototype.handle=function(req){var _this=this;if("JSONP"!==req.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==req.responseType)throw new Error("JSONP requests must use Json response type.");return new rxjs.Observable(function(observer){var callback=_this.nextCallback(),url=req.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,"="+callback+"$1"),node=_this.document.createElement("script");node.src=url;var body=null,finished=!1,cancelled=!1;_this.callbackMap[callback]=function(data){delete _this.callbackMap[callback],cancelled||(body=data,finished=!0)};var cleanup=function(){node.parentNode&&node.parentNode.removeChild(node),delete _this.callbackMap[callback]},onLoad=function(event){cancelled||(cleanup(),finished?(observer.next(new HttpResponse({body:body,status:200,statusText:"OK",url:url})),observer.complete()):observer.error(new HttpErrorResponse({url:url,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")})))},onError=function(error){cancelled||(cleanup(),observer.error(new HttpErrorResponse({error:error,status:0,statusText:"JSONP Error",url:url})))};return node.addEventListener("load",onLoad),node.addEventListener("error",onError),_this.document.body.appendChild(node),observer.next({type:HttpEventType.Sent}),function(){cancelled=!0,node.removeEventListener("load",onLoad),node.removeEventListener("error",onError),cleanup()}})},JsonpClientBackend=__decorate([core.Injectable(),__param(1,core.Inject(common.DOCUMENT)),__metadata("design:paramtypes",[JsonpCallbackContext,Object])],JsonpClientBackend)}(),JsonpInterceptor=function(){function JsonpInterceptor(jsonp){this.jsonp=jsonp}return JsonpInterceptor.prototype.intercept=function(req,next){return"JSONP"===req.method?this.jsonp.handle(req):next.handle(req)},JsonpInterceptor=__decorate([core.Injectable(),__metadata("design:paramtypes",[JsonpClientBackend])],JsonpInterceptor)}(),XSSI_PREFIX=/^\)\]\}',?\n/;
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var XhrFactory=function(){},BrowserXhr=function(){function BrowserXhr(){}return BrowserXhr.prototype.build=function(){return new XMLHttpRequest},BrowserXhr=__decorate([core.Injectable(),__metadata("design:paramtypes",[])],BrowserXhr)}(),HttpXhrBackend=function(){function HttpXhrBackend(xhrFactory){this.xhrFactory=xhrFactory}return HttpXhrBackend.prototype.handle=function(req){var _this=this;if("JSONP"===req.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new rxjs.Observable(function(observer){var xhr=_this.xhrFactory.build();if(xhr.open(req.method,req.urlWithParams),req.withCredentials&&(xhr.withCredentials=!0),req.headers.forEach(function(name,values){return xhr.setRequestHeader(name,values.join(","))}),req.headers.has("Accept")||xhr.setRequestHeader("Accept","application/json, text/plain, */*"),!req.headers.has("Content-Type")){var detectedType=req.detectContentTypeHeader();null!==detectedType&&xhr.setRequestHeader("Content-Type",detectedType)}if(req.responseType){var responseType=req.responseType.toLowerCase();xhr.responseType="json"!==responseType?responseType:"text"}var reqBody=req.serializeBody(),headerResponse=null,partialFromXhr=function(){if(null!==headerResponse)return headerResponse;var status=1223===xhr.status?204:xhr.status,statusText=xhr.statusText||"OK",headers=new HttpHeaders(xhr.getAllResponseHeaders()),url=function(xhr){return"responseURL"in xhr&&xhr.responseURL?xhr.responseURL:/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())?xhr.getResponseHeader("X-Request-URL"):null}(xhr)||req.url;return headerResponse=new HttpHeaderResponse({headers:headers,status:status,statusText:statusText,url:url})},onLoad=function(){var _a=partialFromXhr(),headers=_a.headers,status=_a.status,statusText=_a.statusText,url=_a.url,body=null;204!==status&&(body=void 0===xhr.response?xhr.responseText:xhr.response),0===status&&(status=body?200:0);var ok=200<=status&&status<300;if("json"===req.responseType&&"string"==typeof body){var originalBody=body;body=body.replace(XSSI_PREFIX,"");try{body=""!==body?JSON.parse(body):null}catch(error){body=originalBody,ok&&(ok=!1,body={error:error,text:body})}}ok?(observer.next(new HttpResponse({body:body,headers:headers,status:status,statusText:statusText,url:url||void 0})),observer.complete()):observer.error(new HttpErrorResponse({error:body,headers:headers,status:status,statusText:statusText,url:url||void 0}))},onError=function(error){var res=new HttpErrorResponse({error:error,status:xhr.status||0,statusText:xhr.statusText||"Unknown Error"});observer.error(res)},sentHeaders=!1,onDownProgress=function(event){sentHeaders||(observer.next(partialFromXhr()),sentHeaders=!0);var progressEvent={type:HttpEventType.DownloadProgress,loaded:event.loaded};event.lengthComputable&&(progressEvent.total=event.total),"text"===req.responseType&&xhr.responseText&&(progressEvent.partialText=xhr.responseText),observer.next(progressEvent)},onUpProgress=function(event){var progress={type:HttpEventType.UploadProgress,loaded:event.loaded};event.lengthComputable&&(progress.total=event.total),observer.next(progress)};return xhr.addEventListener("load",onLoad),xhr.addEventListener("error",onError),req.reportProgress&&(xhr.addEventListener("progress",onDownProgress),null!==reqBody&&xhr.upload&&xhr.upload.addEventListener("progress",onUpProgress)),xhr.send(reqBody),observer.next({type:HttpEventType.Sent}),function(){xhr.removeEventListener("error",onError),xhr.removeEventListener("load",onLoad),req.reportProgress&&(xhr.removeEventListener("progress",onDownProgress),null!==reqBody&&xhr.upload&&xhr.upload.removeEventListener("progress",onUpProgress)),xhr.abort()}})},HttpXhrBackend=__decorate([core.Injectable(),__metadata("design:paramtypes",[XhrFactory])],HttpXhrBackend)}(),XSRF_COOKIE_NAME=new core.InjectionToken("XSRF_COOKIE_NAME"),XSRF_HEADER_NAME=new core.InjectionToken("XSRF_HEADER_NAME"),HttpXsrfTokenExtractor=function(){},HttpXsrfCookieExtractor=function(){function HttpXsrfCookieExtractor(doc,platform,cookieName){this.doc=doc,this.platform=platform,this.cookieName=cookieName,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return HttpXsrfCookieExtractor.prototype.getToken=function(){if("server"===this.platform)return null;var cookieString=this.doc.cookie||"";return cookieString!==this.lastCookieString&&(this.parseCount++,this.lastToken=common.ɵparseCookieValue(cookieString,this.cookieName),this.lastCookieString=cookieString),this.lastToken},HttpXsrfCookieExtractor=__decorate([core.Injectable(),__param(0,core.Inject(common.DOCUMENT)),__param(1,core.Inject(core.PLATFORM_ID)),__param(2,core.Inject(XSRF_COOKIE_NAME)),__metadata("design:paramtypes",[Object,String,String])],HttpXsrfCookieExtractor)}(),HttpXsrfInterceptor=function(){function HttpXsrfInterceptor(tokenService,headerName){this.tokenService=tokenService,this.headerName=headerName}return HttpXsrfInterceptor.prototype.intercept=function(req,next){var lcUrl=req.url.toLowerCase();if("GET"===req.method||"HEAD"===req.method||lcUrl.startsWith("http://")||lcUrl.startsWith("https://"))return next.handle(req);var token=this.tokenService.getToken();return null===token||req.headers.has(this.headerName)||(req=req.clone({headers:req.headers.set(this.headerName,token)})),next.handle(req)},HttpXsrfInterceptor=__decorate([core.Injectable(),__param(1,core.Inject(XSRF_HEADER_NAME)),__metadata("design:paramtypes",[HttpXsrfTokenExtractor,String])],HttpXsrfInterceptor)}(),HttpInterceptingHandler=function(){function HttpInterceptingHandler(backend,injector){this.backend=backend,this.injector=injector,this.chain=null}return HttpInterceptingHandler.prototype.handle=function(req){if(null===this.chain){var interceptors=this.injector.get(HTTP_INTERCEPTORS,[]);this.chain=interceptors.reduceRight(function(next,interceptor){return new HttpInterceptorHandler(next,interceptor)},this.backend)}return this.chain.handle(req)},HttpInterceptingHandler=__decorate([core.Injectable(),__metadata("design:paramtypes",[HttpBackend,core.Injector])],HttpInterceptingHandler)}();function jsonpCallbackContext(){return"object"==typeof window?window:{}}var Reflect$1,HttpClientXsrfModule=function(){function HttpClientXsrfModule(){}var HttpClientXsrfModule_1;return(HttpClientXsrfModule_1=HttpClientXsrfModule).disable=function(){return{ngModule:HttpClientXsrfModule_1,providers:[{provide:HttpXsrfInterceptor,useClass:NoopInterceptor}]}},HttpClientXsrfModule.withOptions=function(options){return void 0===options&&(options={}),{ngModule:HttpClientXsrfModule_1,providers:[options.cookieName?{provide:XSRF_COOKIE_NAME,useValue:options.cookieName}:[],options.headerName?{provide:XSRF_HEADER_NAME,useValue:options.headerName}:[]]}},HttpClientXsrfModule=HttpClientXsrfModule_1=__decorate([core.NgModule({providers:[HttpXsrfInterceptor,{provide:HTTP_INTERCEPTORS,useExisting:HttpXsrfInterceptor,multi:!0},{provide:HttpXsrfTokenExtractor,useClass:HttpXsrfCookieExtractor},{provide:XSRF_COOKIE_NAME,useValue:"XSRF-TOKEN"},{provide:XSRF_HEADER_NAME,useValue:"X-XSRF-TOKEN"}]})],HttpClientXsrfModule)}(),HttpClientModule=function(){function HttpClientModule(){}return HttpClientModule=__decorate([core.NgModule({imports:[HttpClientXsrfModule.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})],providers:[HttpClient,{provide:HttpHandler,useClass:HttpInterceptingHandler},HttpXhrBackend,{provide:HttpBackend,useExisting:HttpXhrBackend},BrowserXhr,{provide:XhrFactory,useExisting:BrowserXhr}]})],HttpClientModule)}();!function(){function HttpClientJsonpModule(){}HttpClientJsonpModule=__decorate([core.NgModule({providers:[JsonpClientBackend,{provide:JsonpCallbackContext,useFactory:jsonpCallbackContext},{provide:HTTP_INTERCEPTORS,useClass:JsonpInterceptor,multi:!0}]})],HttpClientJsonpModule)}();
/**
     * @license ngx-api-orm
     * MIT license
     */
function toDash(name){var split=name.split("");return split[0]=split[0].toLowerCase(),split.join("").replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function toPlural(name){return name+"s"}!function(Reflect){!function(factory){var root="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),exporter=makeExporter(Reflect);function makeExporter(target,previous){return function(key,value){"function"!=typeof target[key]&&Object.defineProperty(target,key,{configurable:!0,writable:!0,value:value}),previous&&previous(key,value)}}void 0===root.Reflect?root.Reflect=Reflect:exporter=makeExporter(root.Reflect,exporter),function(exporter){var hasOwn=Object.prototype.hasOwnProperty,supportsSymbol="function"==typeof Symbol,toPrimitiveSymbol=supportsSymbol&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",iteratorSymbol=supportsSymbol&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",supportsCreate="function"==typeof Object.create,supportsProto={__proto__:[]}instanceof Array,downLevel=!supportsCreate&&!supportsProto,HashMap={create:supportsCreate?function(){return MakeDictionary(Object.create(null))}:supportsProto?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:downLevel?function(map,key){return hasOwn.call(map,key)}:function(map,key){return key in map},get:downLevel?function(map,key){return hasOwn.call(map,key)?map[key]:void 0}:function(map,key){return map[key]}},functionPrototype=Object.getPrototypeOf(Function),usePolyfill="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,_Map=usePolyfill||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var cacheSentinel={},arraySentinel=[],MapIterator=function(){function MapIterator(keys,values,selector){this._index=0,this._keys=keys,this._values=values,this._selector=selector}return MapIterator.prototype["@@iterator"]=function(){return this},MapIterator.prototype[iteratorSymbol]=function(){return this},MapIterator.prototype.next=function(){var index=this._index;if(0<=index&&index<this._keys.length){var result=this._selector(this._keys[index],this._values[index]);return index+1>=this._keys.length?(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel):this._index++,{value:result,done:!1}}return{value:void 0,done:!0}},MapIterator.prototype.throw=function(error){throw 0<=this._index&&(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel),error},MapIterator.prototype.return=function(value){return 0<=this._index&&(this._index=-1,this._keys=arraySentinel,this._values=arraySentinel),{value:value,done:!0}},MapIterator}();return function(){function Map(){this._keys=[],this._values=[],this._cacheKey=cacheSentinel,this._cacheIndex=-2}return Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Map.prototype.has=function(key){return 0<=this._find(key,!1)},Map.prototype.get=function(key){var index=this._find(key,!1);return 0<=index?this._values[index]:void 0},Map.prototype.set=function(key,value){var index=this._find(key,!0);return this._values[index]=value,this},Map.prototype.delete=function(key){var index=this._find(key,!1);if(0<=index){for(var size=this._keys.length,i=index+1;i<size;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,key===this._cacheKey&&(this._cacheKey=cacheSentinel,this._cacheIndex=-2),!0}return!1},Map.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=cacheSentinel,this._cacheIndex=-2},Map.prototype.keys=function(){return new MapIterator(this._keys,this._values,getKey)},Map.prototype.values=function(){return new MapIterator(this._keys,this._values,getValue)},Map.prototype.entries=function(){return new MapIterator(this._keys,this._values,getEntry)},Map.prototype["@@iterator"]=function(){return this.entries()},Map.prototype[iteratorSymbol]=function(){return this.entries()},Map.prototype._find=function(key,insert){return this._cacheKey!==key&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=key)),this._cacheIndex<0&&insert&&(this._cacheIndex=this._keys.length,this._keys.push(key),this._values.push(void 0)),this._cacheIndex},Map}();function getKey(key,_){return key}function getValue(_,value){return value}function getEntry(key,value){return[key,value]}}():Map,_Set=usePolyfill||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function Set(){this._map=new _Map}return Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Set.prototype.has=function(value){return this._map.has(value)},Set.prototype.add=function(value){return this._map.set(value,value),this},Set.prototype.delete=function(value){return this._map.delete(value)},Set.prototype.clear=function(){this._map.clear()},Set.prototype.keys=function(){return this._map.keys()},Set.prototype.values=function(){return this._map.values()},Set.prototype.entries=function(){return this._map.entries()},Set.prototype["@@iterator"]=function(){return this.keys()},Set.prototype[iteratorSymbol]=function(){return this.keys()},Set}():Set,Metadata=new(usePolyfill||"function"!=typeof WeakMap?function(){var UUID_SIZE=16,keys=HashMap.create(),rootKey=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}return WeakMap.prototype.has=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table&&HashMap.has(table,this._key)},WeakMap.prototype.get=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table?HashMap.get(table,this._key):void 0},WeakMap.prototype.set=function(target,value){var table=GetOrCreateWeakMapTable(target,!0);return table[this._key]=value,this},WeakMap.prototype.delete=function(target){var table=GetOrCreateWeakMapTable(target,!1);return void 0!==table&&delete table[this._key]},WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()},WeakMap}();function CreateUniqueKey(){for(var key;key="@@WeakMap@@"+CreateUUID(),HashMap.has(keys,key););return keys[key]=!0,key}function GetOrCreateWeakMapTable(target,create){if(!hasOwn.call(target,rootKey)){if(!create)return;Object.defineProperty(target,rootKey,{value:HashMap.create()})}return target[rootKey]}function FillRandomBytes(buffer,size){for(var i=0;i<size;++i)buffer[i]=255*Math.random()|0;return buffer}function CreateUUID(){var data=function(size){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(size)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(size)):FillRandomBytes(new Uint8Array(size),size);return FillRandomBytes(new Array(size),size)}(UUID_SIZE);data[6]=79&data[6]|64,data[8]=191&data[8]|128;for(var result="",offset=0;offset<UUID_SIZE;++offset){var byte=data[offset];4!==offset&&6!==offset&&8!==offset||(result+="-"),byte<16&&(result+="0"),result+=byte.toString(16).toLowerCase()}return result}}():WeakMap);function GetOrCreateMetadataMap(O,P,Create){var targetMetadata=Metadata.get(O);if(IsUndefined(targetMetadata)){if(!Create)return;targetMetadata=new _Map,Metadata.set(O,targetMetadata)}var metadataMap=targetMetadata.get(P);if(IsUndefined(metadataMap)){if(!Create)return;metadataMap=new _Map,targetMetadata.set(P,metadataMap)}return metadataMap}function OrdinaryHasOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!1);return!IsUndefined(metadataMap)&&!!metadataMap.has(MetadataKey)}function OrdinaryGetOwnMetadata(MetadataKey,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!1);if(!IsUndefined(metadataMap))return metadataMap.get(MetadataKey)}function OrdinaryDefineOwnMetadata(MetadataKey,MetadataValue,O,P){var metadataMap=GetOrCreateMetadataMap(O,P,!0);metadataMap.set(MetadataKey,MetadataValue)}function OrdinaryOwnMetadataKeys(O,P){var keys=[],metadataMap=GetOrCreateMetadataMap(O,P,!1);if(IsUndefined(metadataMap))return keys;for(var keysObj=metadataMap.keys(),iterator=function(obj){var method=GetMethod(obj,iteratorSymbol);if(!IsCallable(method))throw new TypeError;var iterator=method.call(obj);if(!IsObject(iterator))throw new TypeError;return iterator}(keysObj),k=0;;){var next=IteratorStep(iterator);if(!next)return keys.length=k,keys;var nextValue=next.value;try{keys[k]=nextValue}catch(e){try{IteratorClose(iterator)}finally{throw e}}k++}}function Type(x){if(null===x)return 1;switch(typeof x){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===x?1:6;default:return 6}}function IsUndefined(x){return void 0===x}function IsNull(x){return null===x}function IsObject(x){return"object"==typeof x?null!==x:"function"==typeof x}function ToPrimitive(input,PreferredType){switch(Type(input)){case 0:case 1:case 2:case 3:case 4:case 5:return input}var hint=3===PreferredType?"string":5===PreferredType?"number":"default",exoticToPrim=GetMethod(input,toPrimitiveSymbol);if(void 0!==exoticToPrim){var result=exoticToPrim.call(input,hint);if(IsObject(result))throw new TypeError;return result}return function(O,hint){if("string"===hint){var toString_1=O.toString;if(IsCallable(toString_1)){var result=toString_1.call(O);if(!IsObject(result))return result}var valueOf=O.valueOf;if(IsCallable(valueOf)){var result=valueOf.call(O);if(!IsObject(result))return result}}else{var valueOf=O.valueOf;if(IsCallable(valueOf)){var result=valueOf.call(O);if(!IsObject(result))return result}var toString_2=O.toString;if(IsCallable(toString_2)){var result=toString_2.call(O);if(!IsObject(result))return result}}throw new TypeError}(input,"default"===hint?"number":hint)}function ToPropertyKey(argument){var key=ToPrimitive(argument,3);return"symbol"==typeof key?key:function(argument){return""+argument}(key)}function IsArray(argument){return Array.isArray?Array.isArray(argument):argument instanceof Object?argument instanceof Array:"[object Array]"===Object.prototype.toString.call(argument)}function IsCallable(argument){return"function"==typeof argument}function IsConstructor(argument){return"function"==typeof argument}function GetMethod(V,P){var func=V[P];if(null!=func){if(!IsCallable(func))throw new TypeError;return func}}function IteratorStep(iterator){var result=iterator.next();return!result.done&&result}function IteratorClose(iterator){var f=iterator.return;f&&f.call(iterator)}function OrdinaryGetPrototypeOf(O){var proto=Object.getPrototypeOf(O);if("function"!=typeof O||O===functionPrototype)return proto;if(proto!==functionPrototype)return proto;var prototype=O.prototype,prototypeProto=prototype&&Object.getPrototypeOf(prototype);if(null==prototypeProto||prototypeProto===Object.prototype)return proto;var constructor=prototypeProto.constructor;return"function"!=typeof constructor?proto:constructor===O?proto:constructor}function MakeDictionary(obj){return obj.__=void 0,delete obj.__,obj}exporter("decorate",function(decorators,target,propertyKey,attributes){{if(IsUndefined(propertyKey)){if(!IsArray(decorators))throw new TypeError;if(!IsConstructor(target))throw new TypeError;return function(decorators,target){for(var i=decorators.length-1;0<=i;--i){var decorator=decorators[i],decorated=decorator(target);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsConstructor(decorated))throw new TypeError;target=decorated}}return target}(decorators,target)}if(!IsArray(decorators))throw new TypeError;if(!IsObject(target))throw new TypeError;if(!IsObject(attributes)&&!IsUndefined(attributes)&&!IsNull(attributes))throw new TypeError;return IsNull(attributes)&&(attributes=void 0),propertyKey=ToPropertyKey(propertyKey),function(decorators,target,propertyKey,descriptor){for(var i=decorators.length-1;0<=i;--i){var decorator=decorators[i],decorated=decorator(target,propertyKey,descriptor);if(!IsUndefined(decorated)&&!IsNull(decorated)){if(!IsObject(decorated))throw new TypeError;descriptor=decorated}}return descriptor}(decorators,target,propertyKey,attributes)}}),exporter("metadata",function(metadataKey,metadataValue){return function(target,propertyKey){if(!IsObject(target))throw new TypeError;if(!IsUndefined(propertyKey)&&!function(argument){switch(Type(argument)){case 3:case 4:return!0;default:return!1}}(propertyKey))throw new TypeError;OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}}),exporter("defineMetadata",function(metadataKey,metadataValue,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryDefineOwnMetadata(metadataKey,metadataValue,target,propertyKey)}),exporter("hasMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return function OrdinaryHasMetadata(MetadataKey,O,P){var hasOwn=OrdinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return!0;var parent=OrdinaryGetPrototypeOf(O);if(!IsNull(parent))return OrdinaryHasMetadata(MetadataKey,parent,P);return!1}(metadataKey,target,propertyKey)}),exporter("hasOwnMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryHasOwnMetadata(metadataKey,target,propertyKey)}),exporter("getMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return function OrdinaryGetMetadata(MetadataKey,O,P){var hasOwn=OrdinaryHasOwnMetadata(MetadataKey,O,P);if(hasOwn)return OrdinaryGetOwnMetadata(MetadataKey,O,P);var parent=OrdinaryGetPrototypeOf(O);if(!IsNull(parent))return OrdinaryGetMetadata(MetadataKey,parent,P);return}(metadataKey,target,propertyKey)}),exporter("getOwnMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryGetOwnMetadata(metadataKey,target,propertyKey)}),exporter("getMetadataKeys",function(target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return function OrdinaryMetadataKeys(O,P){var ownKeys=OrdinaryOwnMetadataKeys(O,P);var parent=OrdinaryGetPrototypeOf(O);if(null===parent)return ownKeys;var parentKeys=OrdinaryMetadataKeys(parent,P);if(parentKeys.length<=0)return ownKeys;if(ownKeys.length<=0)return parentKeys;var set=new _Set;var keys=[];for(var _i=0,ownKeys_1=ownKeys;_i<ownKeys_1.length;_i++){var key=ownKeys_1[_i],hasKey=set.has(key);hasKey||(set.add(key),keys.push(key))}for(var _a=0,parentKeys_1=parentKeys;_a<parentKeys_1.length;_a++){var key=parentKeys_1[_a],hasKey=set.has(key);hasKey||(set.add(key),keys.push(key))}return keys}(target,propertyKey)}),exporter("getOwnMetadataKeys",function(target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));return OrdinaryOwnMetadataKeys(target,propertyKey)}),exporter("deleteMetadata",function(metadataKey,target,propertyKey){if(!IsObject(target))throw new TypeError;IsUndefined(propertyKey)||(propertyKey=ToPropertyKey(propertyKey));var metadataMap=GetOrCreateMetadataMap(target,propertyKey,!1);if(IsUndefined(metadataMap))return!1;if(!metadataMap.delete(metadataKey))return!1;if(0<metadataMap.size)return!0;var targetMetadata=Metadata.get(target);return targetMetadata.delete(propertyKey),0<targetMetadata.size||Metadata.delete(target),!0})}(exporter)}()}(Reflect$1||(Reflect$1={}));var InjectorContainer={instance:void 0};function getDependencyInjectionEntries(token){if(void 0!==InjectorContainer.instance){var injectedInstance=InjectorContainer.instance.get(token);return[injectedInstance._adapter,injectedInstance._builder,injectedInstance._toOneAdapter,injectedInstance._toOneBuilder,injectedInstance._toManyAdapter,injectedInstance._toManyBuilder]}return[]}var HttpVerb={GET:"get",POST:"post",PUT:"put",PATCH:"patch",DELETE:"delete"};function initMetaData(ctor){Reflect.hasOwnMetadata(METAKEYS.FIELDS,ctor)||Reflect.defineMetadata(METAKEYS.FIELDS,[],ctor),Reflect.hasOwnMetadata(METAKEYS.ATTRIBUTES,ctor)||Reflect.defineMetadata(METAKEYS.ATTRIBUTES,[],ctor),Reflect.hasOwnMetadata(METAKEYS.RELATIONS,ctor)||Reflect.defineMetadata(METAKEYS.RELATIONS,{},ctor),Reflect.hasOwnMetadata(METAKEYS.INSTANCES,ctor)||Reflect.defineMetadata(METAKEYS.INSTANCES,[],ctor)}var METAKEYS={FIELDS:"orm:fields",ATTRIBUTES:"orm:attributes",RELATIONS:"orm:relations",MAP:"orm:map",UPDATED:"orm:updated",INSTANCES:"orm:instances",NAME:"orm:name"},ResourceModuleConfiguration=function(){},ResourceModuleConfigurationWithProviders=function(_super){function ResourceModuleConfigurationWithProviders(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ResourceModuleConfigurationWithProviders,_super),ResourceModuleConfigurationWithProviders}(ResourceModuleConfiguration),ToManyRelation=function(_super){function ToManyRelation(_hostInstance,_configuration,_adapter,_builder){var _this=_super.call(this)||this;_this._hostInstance=_hostInstance,_this._configuration=_configuration,_this._adapter=_adapter,_this._builder=_builder,_this.add=function(relatedInstance,options){return void 0===options&&(options={}),__awaiter(_this,void 0,void 0,function(){var hostName,relatedName,body;return __generator(this,function(_a){switch(_a.label){case 0:if(hostName=Reflect.getMetadata(METAKEYS.NAME,this._configuration.HostResource),relatedName=Reflect.getMetadata(METAKEYS.NAME,this._configuration.RelatedResource),!(relatedInstance instanceof this._configuration.RelatedResource))throw new TypeError("parameter relatedInstance must be of type "+relatedName);return body=this._adapter.add(relatedInstance,this._hostInstance),[4,this._builder.add(relatedName,hostName,body,this._hostInstance,options)];case 1:return _a.sent(),this.push(relatedInstance),[2]}})})},_this.remove=function(relatedInstance,options){return void 0===options&&(options={}),__awaiter(_this,void 0,void 0,function(){var hostName,relatedName,body;return __generator(this,function(_a){switch(_a.label){case 0:if(hostName=Reflect.getMetadata(METAKEYS.NAME,this._configuration.HostResource),relatedName=Reflect.getMetadata(METAKEYS.NAME,this._configuration.RelatedResource),-1===this.findIndex(function(ri){return ri.id===relatedInstance.id}))throw new RangeError("parameter relatedInstance not included in this RelatedResourceCollection");return body=this._adapter.remove(relatedInstance,this._hostInstance),[4,this._builder.remove(relatedName,hostName,body,this._hostInstance,options)];case 1:return _a.sent(),this._removeInstance(relatedInstance),[2]}})})},_this._removeInstance=function(relatedInstance){for(var n=0;n<_this.length;n++)if(_this[n].id===relatedInstance.id){_this.splice(n,1);break}};var rawObjects=_hostInstance[_configuration.keyOnInstance]||null;if(null==rawObjects)return _this;var instances=Array.prototype.concat.apply([],[_configuration.RelatedResource.factory(rawObjects)]);return _this.push.apply(_this,instances),_this}return __extends(ToManyRelation,_super),ToManyRelation}(Array),RelationType_ToOne="toOne",RelationType_ToMany="toMany",RelationConfiguration=function(HostResource,RelatedResource,keyOnInstance,type){this.HostResource=HostResource,this.RelatedResource=RelatedResource,this.keyOnInstance=keyOnInstance,this.type=type},ToOneRelation=function(){function ToOneRelation(_hostInstance,_configuration,_adapter,_builder){this._hostInstance=_hostInstance,this._configuration=_configuration,this._adapter=_adapter,this._builder=_builder;var rawObject=_hostInstance[_configuration.keyOnInstance]||null;this.instance=null===rawObject?null:_configuration.RelatedResource.factory(rawObject)}return ToOneRelation.prototype.sync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){switch(_a.label){case 0:return null!==this.instance?[3,2]:[4,this.remove()];case 1:return _a.sent(),[3,4];case 2:return[4,this.set(this.instance)];case 3:_a.sent(),_a.label=4;case 4:return[2]}})})},ToOneRelation.prototype.remove=function(options){return void 0===options&&(options={}),__awaiter(this,void 0,void 0,function(){var hostName,relatedName,body;return __generator(this,function(_a){switch(_a.label){case 0:return this.instance?(hostName=Reflect.getMetadata(METAKEYS.NAME,this._configuration.HostResource),relatedName=Reflect.getMetadata(METAKEYS.NAME,this._configuration.RelatedResource),body=this._adapter.remove(this.instance,this._hostInstance),[4,this._builder.remove(relatedName,hostName,body,this._hostInstance,options)]):[3,2];case 1:_a.sent(),this.instance=null,_a.label=2;case 2:return[2]}})})},ToOneRelation.prototype.set=function(targetInstance,options){return void 0===options&&(options={}),__awaiter(this,void 0,void 0,function(){var hostName,relatedName,body;return __generator(this,function(_a){switch(_a.label){case 0:return hostName=Reflect.getMetadata(METAKEYS.NAME,this._configuration.HostResource),relatedName=Reflect.getMetadata(METAKEYS.NAME,this._configuration.RelatedResource),body=this._adapter.add(targetInstance,this._hostInstance),[4,this._builder.add(relatedName,hostName,body,this._hostInstance,options)];case 1:return _a.sent(),this.instance=targetInstance,[2]}})})},ToOneRelation}();!function(Abstract){var BaseBuilder=function(){function BaseBuilder(_http){this._http=_http}return BaseBuilder.prototype.request=function(method,path,options,body){return delete options.url,body&&(options.body=body),this._http.request(method,path,options).toPromise()},BaseBuilder}(),SimpleBuilder=function(_super){function SimpleBuilder(_http,config){var _this=_super.call(this,_http)||this;return _this._http=_http,_this.config=config,_this}return __extends(SimpleBuilder,_super),SimpleBuilder.prototype.buildUrl=function(targetName,targetInstance){var path=(this.config.rootPath?this.config.rootPath:"")+"/"+toPlural(targetName)+"/$targetId";return path=path.replace("/$targetId",targetInstance?"/"+targetInstance.id:"")},SimpleBuilder.prototype.fetch=function(targetName,options){var path=options.url||this.buildUrl(targetName);return this.request(HttpVerb.GET,path,options)},SimpleBuilder.prototype.save=function(targetName,body,options){var path=options.url||this.buildUrl(targetName);return this.request(HttpVerb.POST,path,options,body)},SimpleBuilder.prototype.update=function(targetName,body,options){var path=options.url||this.buildUrl(targetName,body);return this.request(HttpVerb.PATCH,path,options,body).then(function(){return Promise.resolve()})},SimpleBuilder.prototype.delete=function(targetName,instance,options){var path=options.url||this.buildUrl(targetName,instance);return this.request(HttpVerb.DELETE,path,options).then(function(){return Promise.resolve()})},SimpleBuilder}(Abstract.BaseBuilder=BaseBuilder);Abstract.SimpleBuilder=SimpleBuilder;var ToOneBuilder=function(_super){function ToOneBuilder(_http,config){var _this=_super.call(this,_http)||this;return _this._http=_http,_this.config=config,_this}return __extends(ToOneBuilder,_super),ToOneBuilder.prototype.buildUrl=function(targetName,relatedName,relatedInstance){return(this.config.rootPath?this.config.rootPath:"")+"/"+toPlural(relatedName)+"/"+relatedInstance.id+"/"+targetName},ToOneBuilder.prototype.add=function(targetName,relatedName,body,relatedInstance,options){var path=options.url||this.buildUrl(targetName,relatedName,relatedInstance);return this.request(HttpVerb.PATCH,path,options,body).then(function(){return Promise.resolve()})},ToOneBuilder.prototype.remove=function(targetName,relatedName,body,relatedInstance,options){var path=options.url||this.buildUrl(targetName,relatedName,relatedInstance);return this.request(HttpVerb.DELETE,path,options).then(function(){return Promise.resolve()})},ToOneBuilder}(BaseBuilder);Abstract.ToOneBuilder=ToOneBuilder;var ToManyBuilder=function(_super){function ToManyBuilder(_http,config){var _this=_super.call(this,_http)||this;return _this._http=_http,_this.config=config,_this}return __extends(ToManyBuilder,_super),ToManyBuilder.prototype.buildUrl=function(targetName,relatedName,relatedInstance){return(this.config.rootPath?this.config.rootPath:"")+"/"+toPlural(relatedName)+"/"+relatedInstance.id+"/"+toPlural(targetName)},ToManyBuilder.prototype.add=function(targetName,relatedName,body,relatedInstance,options){var path=options.url||this.buildUrl(targetName,relatedName,relatedInstance);return this.request(HttpVerb.POST,path,options,body).then(function(){return Promise.resolve()})},ToManyBuilder.prototype.remove=function(targetName,relatedName,body,relatedInstance,options){var path=options.url||this.buildUrl(targetName,relatedName,relatedInstance);return this.request(HttpVerb.DELETE,path,options,body).then(function(){return Promise.resolve()})},ToManyBuilder}(BaseBuilder);Abstract.ToManyBuilder=ToManyBuilder}(exports.AbstractBuilders||(exports.AbstractBuilders={}));var SimpleBuilder$$1=function(_super){function SimpleBuilder$$1(_http,_config){return _super.call(this,_http,_config)||this}return __extends(SimpleBuilder$$1,_super),SimpleBuilder$$1.decorators=[{type:core.Injectable,args:[{providedIn:"root"}]}],SimpleBuilder$$1.ctorParameters=function(){return[{type:HttpClient},{type:ResourceModuleConfiguration}]},SimpleBuilder$$1.ngInjectableDef=core.defineInjectable({factory:function(){return new SimpleBuilder$$1(core.inject(HttpClient),core.inject(ResourceModuleConfiguration))},token:SimpleBuilder$$1,providedIn:"root"}),SimpleBuilder$$1}(exports.AbstractBuilders.SimpleBuilder),ToOneBuilder$$1=function(_super){function ToOneBuilder$$1(_http,_config){return _super.call(this,_http,_config)||this}return __extends(ToOneBuilder$$1,_super),ToOneBuilder$$1.decorators=[{type:core.Injectable,args:[{providedIn:"root"}]}],ToOneBuilder$$1.ctorParameters=function(){return[{type:HttpClient},{type:ResourceModuleConfiguration}]},ToOneBuilder$$1.ngInjectableDef=core.defineInjectable({factory:function(){return new ToOneBuilder$$1(core.inject(HttpClient),core.inject(ResourceModuleConfiguration))},token:ToOneBuilder$$1,providedIn:"root"}),ToOneBuilder$$1}(exports.AbstractBuilders.ToOneBuilder),ToManyBuilder$$1=function(_super){function ToManyBuilder$$1(_http,_config){return _super.call(this,_http,_config)||this}return __extends(ToManyBuilder$$1,_super),ToManyBuilder$$1.decorators=[{type:core.Injectable,args:[{providedIn:"root"}]}],ToManyBuilder$$1.ctorParameters=function(){return[{type:HttpClient},{type:ResourceModuleConfiguration}]},ToManyBuilder$$1.ngInjectableDef=core.defineInjectable({factory:function(){return new ToManyBuilder$$1(core.inject(HttpClient),core.inject(ResourceModuleConfiguration))},token:ToManyBuilder$$1,providedIn:"root"}),ToManyBuilder$$1}(exports.AbstractBuilders.ToManyBuilder);!function(Abstract){var SimpleAdapter=function(){function SimpleAdapter(){}return SimpleAdapter.prototype.save=function(instance){return this.convertOutgoing(instance)},SimpleAdapter.prototype.update=function(instance,affectedFields){return this.convertOutgoing(instance)},SimpleAdapter.prototype.parseIncoming=function(rawInstances){return rawInstances},SimpleAdapter.prototype.convertOutgoing=function(instance){var _this=this,rv={};return Reflect.getMetadata(METAKEYS.FIELDS,instance.constructor).forEach(function(f){instance[f]instanceof ToOneRelation?rv[f]=null===instance[f].instance?null:_this.convertOutgoing(instance[f].instance):instance[f]instanceof Array?(rv[f]=[],instance[f].forEach(function(i){return rv[f].push(_this.convertOutgoing(i))})):rv[f]=instance[f]}),Reflect.ownKeys(instance).forEach(function(property){var map=Reflect.getMetadata(METAKEYS.MAP,instance.constructor,property);map&&(rv[map]=rv[property],delete rv[property])}),rv},SimpleAdapter}();Abstract.SimpleAdapter=SimpleAdapter;var ToOneAdapter=function(){function ToOneAdapter(){}return ToOneAdapter.prototype.add=function(targetInstance,relatedInstance){return{id:targetInstance.id}},ToOneAdapter.prototype.remove=function(targetInstance,relatedInstance){},ToOneAdapter}();Abstract.ToOneAdapter=ToOneAdapter;var ToManyAdapter=function(){function ToManyAdapter(){}return ToManyAdapter.prototype.add=function(targetInstance,relatedInstance){return{id:targetInstance.id}},ToManyAdapter.prototype.remove=function(targetInstance,relatedInstance){},ToManyAdapter}();Abstract.ToManyAdapter=ToManyAdapter}(exports.AbstractAdapters||(exports.AbstractAdapters={}));var SimpleAdapter$$1=function(_super){function SimpleAdapter$$1(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(SimpleAdapter$$1,_super),SimpleAdapter$$1.decorators=[{type:core.Injectable,args:[{providedIn:"root"}]}],SimpleAdapter$$1.ngInjectableDef=core.defineInjectable({factory:function(){return new SimpleAdapter$$1},token:SimpleAdapter$$1,providedIn:"root"}),SimpleAdapter$$1}(exports.AbstractAdapters.SimpleAdapter),ToOneAdapter$$1=function(_super){function ToOneAdapter$$1(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ToOneAdapter$$1,_super),ToOneAdapter$$1.decorators=[{type:core.Injectable,args:[{providedIn:"root"}]}],ToOneAdapter$$1.ngInjectableDef=core.defineInjectable({factory:function(){return new ToOneAdapter$$1},token:ToOneAdapter$$1,providedIn:"root"}),ToOneAdapter$$1}(exports.AbstractAdapters.ToOneAdapter),ToManyAdapter$$1=function(_super){function ToManyAdapter$$1(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ToManyAdapter$$1,_super),ToManyAdapter$$1.decorators=[{type:core.Injectable,args:[{providedIn:"root"}]}],ToManyAdapter$$1.ngInjectableDef=core.defineInjectable({factory:function(){return new ToManyAdapter$$1},token:ToManyAdapter$$1,providedIn:"root"}),ToManyAdapter$$1}(exports.AbstractAdapters.ToManyAdapter),RawInstance=function(){},Resource=function(){function Resource(rawInstance,simpleAdapter,simpleBuilder,toOneAdapter,toOneBuilder,toManyAdapter,toManyBuilder){var _rawInstance,requestHandlers=[simpleAdapter,simpleBuilder,toOneAdapter,toOneBuilder,toManyAdapter,toManyBuilder];if(this._handleInjections(requestHandlers)&&null===rawInstance)return this;if(rawInstance){(_rawInstance=rawInstance).id=_rawInstance.id||void 0;var alreadyExisting=this.ctor.find(_rawInstance.id);if(alreadyExisting)return alreadyExisting}else _rawInstance=this.ctor.template();this._populateFields(_rawInstance),this._populateRelations(),this.onInit(_rawInstance);var targetInstance,attributes,proxyInstance=(targetInstance=this,attributes=Reflect.getMetadata(METAKEYS.ATTRIBUTES,targetInstance.constructor),new Proxy(targetInstance,{set:function(instance,key,value,proxy){return-1<attributes.indexOf(key)&&(Reflect.getMetadata(METAKEYS.UPDATED,proxy)[Reflect.getMetadata(METAKEYS.MAP,instance,key)||key]=instance[key]),instance[key]=value,!0}}));return Reflect.defineMetadata(METAKEYS.UPDATED,{},proxyInstance),this._metaAdd(proxyInstance),proxyInstance}return Object.defineProperty(Resource,"_instances",{get:function(){return targetArray=Reflect.getMetadata(METAKEYS.INSTANCES,this),forbiddenMethods=["push","pop","shift","unshift"],new Proxy(targetArray,{get:function(instance,key,proxy){if(-1<forbiddenMethods.indexOf(key))throw Error("Operation "+key+" not allowed on this readonly array!");return instance[key]}});var targetArray,forbiddenMethods},enumerable:!0,configurable:!0}),Resource.collection=function(){return this._instances},Resource.factory=function(input){var _this=this;if(input instanceof Array)return input.map(function(ro){return new _this(ro)});if(input instanceof Object)return new this(input);throw new TypeError("Overload error")},Resource.find=function(id){return this.collection().find(function(i){return i.id===id})},Resource.fetch=function(options){return void 0===options&&(options={}),__awaiter(this,void 0,void 0,function(){var injections,adapter,builder,resourceName,response,rawInstances;return __generator(this,function(_a){switch(_a.label){case 0:return injections=getDependencyInjectionEntries(this),adapter=injections[0],builder=injections[1],resourceName=Reflect.getMetadata(METAKEYS.NAME,this),[4,builder.fetch(resourceName,options)];case 1:return response=_a.sent(),rawInstances=adapter.parseIncoming(response),[2,this.factory(rawInstances)]}})})},Resource.template=function(){var rawInstance={};return Reflect.getMetadata(METAKEYS.FIELDS,this).forEach(function(field){return rawInstance[field]=void 0}),rawInstance},Resource.prototype.onInit=function(rawInstance){},Resource.prototype.save=function(options){return void 0===options&&(options={}),__awaiter(this,void 0,void 0,function(){var name,body,response,rawInstance;return __generator(this,function(_a){switch(_a.label){case 0:return name=Reflect.getMetadata(METAKEYS.NAME,this.constructor),body=this._adapter.save(this),[4,this._builder.save(name,body,options)];case 1:return response=_a.sent(),rawInstance=this._adapter.parseIncoming(response),[2,this.ctor.factory(rawInstance)]}})})},Resource.prototype.update=function(options){return void 0===options&&(options={}),__awaiter(this,void 0,void 0,function(){var name,affectedKeys,body;return __generator(this,function(_a){switch(_a.label){case 0:return name=Reflect.getMetadata(METAKEYS.NAME,this.constructor),affectedKeys=Reflect.getMetadata(METAKEYS.UPDATED,this),body=this._adapter.update(this,affectedKeys),[4,this._builder.update(name,body,options)];case 1:return _a.sent(),[2]}})})},Resource.prototype.delete=function(options){return void 0===options&&(options={}),__awaiter(this,void 0,void 0,function(){var name;return __generator(this,function(_a){switch(_a.label){case 0:return name=Reflect.getMetadata(METAKEYS.NAME,this.constructor),[4,this._builder.delete(name,this,options)];case 1:return _a.sent(),this._metaRemove(),[2]}})})},Object.defineProperty(Resource.prototype,"ctor",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),Resource.prototype._populateFields=function(rawInstance){var _this=this;Reflect.getMetadata(METAKEYS.FIELDS,this.constructor).forEach(function(field){var map=Reflect.getMetadata(METAKEYS.MAP,_this.constructor,field);if(map&&rawInstance.hasOwnProperty(map))_this[field]=rawInstance[map];else if(rawInstance.hasOwnProperty(field))_this[field]=rawInstance[field];else if(!rawInstance.hasOwnProperty(field))throw Error("Expected key "+field+" for instance of class "+Reflect.getMetadata(METAKEYS.NAME,_this.constructor)+" but it wasn't included")})},Resource.prototype._populateRelations=function(){var _this=this,relations=Reflect.getMetadata(METAKEYS.RELATIONS,this.constructor);Reflect.ownKeys(relations).forEach(function(key){var config=relations[key];switch(config.type){case RelationType_ToOne:_this[key]=new ToOneRelation(_this,config,_this._toOneAdapter,_this._toOneBuilder);break;case RelationType_ToMany:_this[key]=new ToManyRelation(_this,config,_this._toManyAdapter,_this._toManyBuilder);break;default:throw Error("shouldnt come here")}})},Resource.prototype._metaAdd=function(instance){this.id&&Reflect.getMetadata(METAKEYS.INSTANCES,this.constructor).push(instance)},Resource.prototype._metaRemove=function(){for(var list=Reflect.getMetadata(METAKEYS.INSTANCES,this.constructor),n=0;n<list.length;n++)if(list[n].id===this.id){list.splice(n,1);break}},Resource.prototype._handleInjections=function(dependencies){var instantationByAngularDI=!dependencies.includes(void 0);instantationByAngularDI||(dependencies=getDependencyInjectionEntries(this.ctor));var filledDependencies=dependencies;return this._adapter=filledDependencies[0],this._builder=filledDependencies[1],this._toOneAdapter=filledDependencies[2],this._toOneBuilder=filledDependencies[3],this._toManyAdapter=filledDependencies[4],this._toManyBuilder=filledDependencies[5],instantationByAngularDI},Resource.ctorParameters=function(){return[{type:RawInstance,decorators:[{type:core.Optional}]},{type:SimpleAdapter$$1},{type:SimpleBuilder$$1},{type:ToOneAdapter$$1},{type:ToOneBuilder$$1},{type:ToManyAdapter$$1},{type:ToManyBuilder$$1}]},Resource}();var ResourceRootModule=function(){function ResourceRootModule(injector){InjectorContainer.instance=injector}return ResourceRootModule.decorators=[{type:core.NgModule,args:[{imports:[HttpClientModule]}]}],ResourceRootModule.ctorParameters=function(){return[{type:core.Injector}]},ResourceRootModule}(),ResourceModule=function(){function ResourceModule(){}return ResourceModule.forRoot=function(options){void 0===options&&(options={});var config=[{provide:ResourceModuleConfiguration,useValue:{rootPath:options.rootPath}}];return{ngModule:ResourceRootModule,providers:config.concat(options.requestHandler||[])}},ResourceModule.decorators=[{type:core.NgModule,args:[{imports:[HttpClientModule]}]}],ResourceModule}();exports.ResourceRootModule=ResourceRootModule,exports.ResourceModule=ResourceModule,exports.Resource=Resource,exports.Field=function(mapFrom){return function(target,key){var ctor=target.constructor;initMetaData(ctor),Reflect.defineMetadata(METAKEYS.MAP,mapFrom,ctor,key),Reflect.getMetadata(METAKEYS.ATTRIBUTES,ctor).push(key)}},exports.ToOne=function(RelatedResource,mapFrom){return function(target,key){var ctor=target.constructor;initMetaData(ctor),Reflect.defineMetadata(METAKEYS.MAP,mapFrom,ctor,key),Reflect.getMetadata(METAKEYS.FIELDS,ctor).push(key),Reflect.getMetadata(METAKEYS.RELATIONS,ctor)[key]=new RelationConfiguration(ctor,RelatedResource,key,RelationType_ToOne)}},exports.ToMany=function(RelatedResource,mapFrom){return function(target,key){var ctor=target.constructor;initMetaData(ctor),Reflect.defineMetadata(METAKEYS.MAP,mapFrom,ctor,key),Reflect.getMetadata(METAKEYS.FIELDS,ctor).push(key),Reflect.getMetadata(METAKEYS.RELATIONS,ctor)[key]=new RelationConfiguration(ctor,RelatedResource,key,RelationType_ToMany)}},exports.Model=function(options){return function(ctor){initMetaData(ctor=core.Injectable({providedIn:"root"})(ctor));var resourceName=options&&options.name?options.name.includes("-")?options.name:toDash(options.name):toDash(ctor.name);Reflect.defineMetadata(METAKEYS.NAME,resourceName,ctor);var fields=Reflect.getMetadata(METAKEYS.FIELDS,ctor),attributes=Reflect.getMetadata(METAKEYS.ATTRIBUTES,ctor);return Reflect.defineMetadata(METAKEYS.FIELDS,fields.concat(attributes),ctor),ctor}},exports.ToManyRelation=ToManyRelation,exports.ToOneRelation=ToOneRelation,exports.ResourceModuleConfigurationWithProviders=ResourceModuleConfigurationWithProviders,exports.ToManyAdapter=ToManyAdapter$$1,exports.ToOneAdapter=ToOneAdapter$$1,exports.SimpleAdapter=SimpleAdapter$$1,exports.ToManyBuilder=ToManyBuilder$$1,exports.ToOneBuilder=ToOneBuilder$$1,exports.SimpleBuilder=SimpleBuilder$$1,exports.ResourceModuleConfiguration=ResourceModuleConfiguration,exports.toPlural=toPlural,exports.toDash=toDash,exports.toPluralDash=function(name){return toPlural(toDash(name))},exports.HttpVerb=HttpVerb,exports.METAKEYS=METAKEYS,exports.ɵc=RelationConfiguration,exports.ɵa=RawInstance,Object.defineProperty(exports,"__esModule",{value:!0})});